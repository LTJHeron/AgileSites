<?xml version="1.0" ?>
<!DOCTYPE FTCS SYSTEM "futuretense_cs.dtd">
<FTCS Version="1.2">
<!-- OpenMarket/Xcelerate/AssetType/CSElement/ContentFormElement
-
- INPUT
-
- OUTPUT
-
-->

<CALLELEMENT NAME="OpenMarket/Xcelerate/AssetType/CSElement/ContentFormSetVar"/>

<!--
Set up variables ModelXml, ModelHtml, ModelHtml variables that contain 
standard CS preamble-postamble needed when creating a new CSElement element.
-->
<callelement NAME="OpenMarket/Xcelerate/AssetType/CSElement/SetModelString"/> 
<SCRIPT LANGUAGE="JavaScript">
<REPLACEALL LIST="Variables.ModelXml,Variables.ModelHtml,Variables.ModelJsp">
<![CDATA[
function getRootElement()
{
	return document.forms[0].elements['CSElement:rootelement'].value ;
}
function setXmlString() {
	var modelXml = new String('Variables.ModelXml');
	var newString = modelXml.replace(/XXXX/,getRootElement);
	if (isblank(document.forms[0].elements['CSElement:url'].value) == true){
		document.forms[0].elements['CSElement:url'].value =newString;
		setDefaultPath(".xml");
	} else 
	{
		if ( confirm( ]]>"<XLAT.STREAM KEY="dvin/AT/CSElement/ConfirmReplaceModelXML" ESCAPE="true" ENCODE="false"/>"<![CDATA[) ) 
		{
			document.forms[0].elements['CSElement:url'].value =newString;
			setDefaultPath(".xml");
		}
	}
}

function setHtmlString() {
	var modelXml = new String('Variables.ModelHtml');
	var newString = modelXml.replace(/XXXX/,getRootElement);
	if (isblank(document.forms[0].elements['CSElement:url'].value) == true){
		document.forms[0].elements['CSElement:url'].value =newString;
		setDefaultPath(".html");
	} else 
	{
		if ( confirm( ]]>"<XLAT.STREAM KEY="dvin/AT/CSElement/ConfirmReplaceModelHTML" ESCAPE="true" ENCODE="false"/>"<![CDATA[) ) 
		{
			document.forms[0].elements['CSElement:url'].value =newString;
			setDefaultPath(".html");
		}
	}
}
function setJspString() {
	var modelXml = new String('Variables.ModelJsp');
	var newString = modelXml.replace(/XXXX/,getRootElement);
	if (isblank(document.forms[0].elements['CSElement:url'].value) == true){
		document.forms[0].elements['CSElement:url'].value =newString;
		setDefaultPath(".jsp");
	} else 
	{
		if ( confirm( ]]>"<XLAT.STREAM KEY="dvin/AT/CSElement/ConfirmReplaceModelJSP" ESCAPE="true" ENCODE="false"/>"<![CDATA[) ) 
		{
			document.forms[0].elements['CSElement:url'].value =newString;
			setDefaultPath(".jsp");
		}
	}
}

function checkforfilename()
{
	var obj = document.forms[0].elements[0];
	var url =obj.form.elements['CSElement:url'].value;
	var urlspec = document.forms[0].elements['CSElement:urlspec'].value;
	if ( isblank(urlspec) && !isblank(url) ) {
	      ]]>
	      alert("<XLAT.STREAM KEY="dvin/AT/Common/SpecifyFilenameForElementLogic" ESCAPE="true" ENCODE="false"/>");
	      <![CDATA[
		return false;
	}
	else if ( urlspec.search(/['"?;:]/) != -1) {
	 	var replacestr=/\bVariables.filename\b/ ;
      var xlatstr= ']]><XLAT.STREAM KEY="dvin/AT/Template/FilenameContainsIllegalCharacters" ENCODE="false" ESCAPE="true"/><![CDATA[' ;
      alert(xlatstr.replace(replacestr,urlspec));
		return false;
	}
	else if ( urlspec.indexOf(".") == -1 ) {
	 	var replacestr=/\bVariables.filename\b/ ;
      var xlatstr= ']]><XLAT.STREAM KEY="dvin/AT/Template/FilenameHasNoExtension" ENCODE="false" ESCAPE="true"/><![CDATA[' ;
      alert(xlatstr.replace(replacestr,urlspec));
		return false;
	}
}
	
]]>
</REPLACEALL>

<![CDATA[


function setDefaultPath(ext) {
	
	if ( ! isblank( document.forms[0].elements['CSElement:rootelement'].value)) {
		var rootelement = document.forms[0].elements['CSElement:rootelement'].value;	
		document.forms[0].elements['CSElement:urlspec'].value = rootelement + ext;
	}	
}
]]>

</SCRIPT>


<table border="0" cellpadding="0" cellspacing="0">

<callelement NAME="OpenMarket/Xcelerate/AssetType/CSElement/ContentFormNavBar">
	<argument NAME="CurrentCat" VALUE="Element"/>
</callelement>

<tr>
<td>	
<table border="0" cellpadding="0" cellspacing="0">
<!-- Beginning of Group 4 - element catalog info -->
   <callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>

	<callelement NAME="OpenMarket/Xcelerate/AssetType/CSElement/ShowElementButtons"/>


<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
<tr>
	<td class="form-label-text"><span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/AT/Rootelement"/>:</td>
	<td></td>
	<td>
	<IF COND="Variables.updatetype!=setformdefaults">
	<THEN>			
		<input type="hidden" name="CSElement:rootelement" value="Variables.ContentDetails:rootelement" REPLACEALL="Variables.ContentDetails:rootelement"/>
		<STRING.STREAM VARIABLE="ContentDetails:rootelement"/>
	</THEN>
	<ELSE>
		<input type="text" size="50" maxlength="255" name="CSElement:rootelement" value="Variables.ContentDetails:rootelement" REPLACEALL="Variables.ContentDetails:rootelement"/>
	</ELSE>
	</IF>
	</td>
</tr>
<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
<tr>
	<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/AT/ElementCatalogDescription"/>:</td>
	<td></td>
       <SETVAR NAME="OutputQString"  VALUE="Variables.empty"/>
       <STRING.ENCODE VARIABLE="ContentDetails:elementdescription" VARNAME="OutputQString"/>
	<td> <input type="text" size="50" maxlength="255" name="CSElement:elementdescription" value="Variables.OutputQString" REPLACEALL="Variables.OutputQString"/></td>
</tr>
<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
<tr>
	<td class="form-label-text"><span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/AT/ElementCatalogEntryStorPathFn"/>:</td>
	<td></td>
	<td> <![CDATA[<input type="text" size="50" maxlength="255" name="CSElement:urlspec" value="]]><STRING.STREAM VALUE="Variables.ContentDetails:urlspec"/><![CDATA[" />]]></td>
</tr>

<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
<tr>
	<td class="form-label-text"><span class="alert-color">*</span><XLAT.STREAM KEY="dvin/Common/AT/ElementLogic"/>:</td>
	<td></td>
	
	
       			<td> <textarea name="CSElement:url" ROWS="25" COLS="50"  WRAP="off" onChange="checkforfilename();">
		
		<STRING.STREAM VARIABLE="ContentDetails:url"/>
		</textarea></td>					
</tr>
<tr>
	<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/AT/ElementParameters"/>:<br>(<XLAT.STREAM KEY="dvin/Common/AT/namevaluepairsdelimitedbyamp" ENCODE="false"/>)</br></td>
	<td></td>
	<td> <![CDATA[<input type="text" size="50" maxlength="255" name="CSElement:resdetails1" value="]]><STRING.STREAM VALUE="Variables.ContentDetails:resdetails1"/><![CDATA["/>]]></td>
</tr>
<callelement NAME="OpenMarket/Xcelerate/UIFramework/Util/RowSpacer"/>
<tr>
	<td class="form-label-text"><XLAT.STREAM KEY="dvin/Common/AT/AdditionalElementParameters"/>:<br>(<XLAT.STREAM KEY="dvin/Common/AT/namevaluepairsdelimitedbyamp" ENCODE="false"/>)</br></td>
	<td></td>
	<td> <![CDATA[<input type="text" size="50" maxlength="255" name="CSElement:resdetails2" value="]]><STRING.STREAM VALUE="Variables.ContentDetails:resdetails2"/><![CDATA["/>]]></td>
</tr>
	
</table>
</td>
</tr>
<IF COND="associations.#numRows!=0">
<THEN>
	<callelement NAME="OpenMarket/Xcelerate/AssetType/CSElement/ContentFormFooter">
		<argument NAME="ContinueTo" VALUE="Associations"/>
	</callelement>
</THEN>
<ELSE>
	<callelement NAME="OpenMarket/Xcelerate/AssetType/CSElement/ContentFormFooter">
		<argument NAME="ContinueTo" VALUE="Map"/>
	</callelement>
</ELSE>
</IF>
</table>
</FTCS>
